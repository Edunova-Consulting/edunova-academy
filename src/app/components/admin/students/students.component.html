<div class="students-container">
  <div class="header">
    <h2>Students</h2>
    <button (click)="openCreateForm()" class="btn-primary">Create Student</button>
  </div>

  <div *ngIf="showForm" class="modal-overlay" (click)="closeForm()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h3>{{ editingStudent ? 'Edit Student' : 'Create Student' }}</h3>
      <form (ngSubmit)="saveStudent()">
        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="formData.email" name="email" required [readonly]="!!editingStudent" />
        </div>
        <div *ngIf="!editingStudent" class="form-group">
          <label>Password</label>
          <input type="password" [(ngModel)]="password" name="password" required />
        </div>
        <div class="form-group">
          <label>First Name</label>
          <input type="text" [(ngModel)]="formData.first_name" name="first_name" />
        </div>
        <div class="form-group">
          <label>Last Name</label>
          <input type="text" [(ngModel)]="formData.last_name" name="last_name" />
        </div>
        <div class="form-group">
          <label>Phone</label>
          <input type="text" [(ngModel)]="formData.phone" name="phone" />
        </div>
        <div class="form-group">
          <label>Enrollment Date</label>
          <input type="date" [(ngModel)]="formData.enrollment_date" name="enrollment_date" />
        </div>
        <div class="form-actions">
          <button type="button" (click)="closeForm()" class="btn-secondary">Cancel</button>
          <button type="submit" class="btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>

  <div class="students-grid">
    <div *ngFor="let student of students" class="student-card">
      <h3>{{ student.first_name }} {{ student.last_name }}</h3>
      <p><strong>Email:</strong> {{ student.email }}</p>
      <p *ngIf="student.phone"><strong>Phone:</strong> {{ student.phone }}</p>
      <p *ngIf="student.enrollment_date"><strong>Enrolled:</strong> {{ student.enrollment_date | date:'shortDate' }}</p>
      <div class="card-actions">
        <button (click)="openEditForm(student)" class="btn-edit">Edit</button>
        <button (click)="deleteStudent(student.id)" class="btn-delete">Delete</button>
      </div>
    </div>
  </div>

  <div *ngIf="students.length === 0" class="empty-state">
    <p>No students found. Create your first student!</p>
  </div>
</div>

